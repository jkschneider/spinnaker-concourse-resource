plugins {
	id 'application'
	id 'org.jetbrains.kotlin.jvm' version '1.3.21'
	id 'org.jetbrains.kotlin.plugin.spring' version '1.3.21'
}

group = 'io.pivotal'
version = 'RELEASE'
sourceCompatibility = '1.8'

repositories {
	mavenCentral()
}

application {
	mainClassName = 'io.pivotal.spinnaker.SpinnakerConcourseResource'
}

dependencies {
	implementation 'org.springframework:spring-webflux:latest.release'
	implementation 'com.fasterxml.jackson.module:jackson-module-kotlin:latest.release'
	implementation 'org.jetbrains.kotlin:kotlin-reflect'
	implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
	implementation 'io.projectreactor.netty:reactor-netty:latest.release'

	testImplementation 'org.junit.jupiter:junit-jupiter:latest.release'
	testImplementation 'org.assertj:assertj-core:latest.release'
}

compileKotlin {
	kotlinOptions {
		freeCompilerArgs = ['-Xjsr305=strict']
		jvmTarget = '1.8'
	}
}

compileTestKotlin {
	kotlinOptions {
		freeCompilerArgs = ['-Xjsr305=strict']
		jvmTarget = '1.8'
	}
}

test {
	useJUnitPlatform()
}